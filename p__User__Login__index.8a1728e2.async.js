(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{11053:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return W}});var s=t(15009),r=t.n(s),n=t(97857),o=t.n(n),i=t(99289),l=t.n(i),c=t(5574),u=t.n(c),g=t(28297),d=t(2618),p=t(80854);function f(e,a){return h.apply(this,arguments)}function h(){return(h=l()(r()().mark((function e(a,t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/login/captcha",o()({method:"GET",params:o()({},a)},t||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=t(88777),x=t(96833),M=t(97487),j=t(87547),v=t(94149),b=t(24454),w=t(68262),y=t(5966),k=t(16434),A=t(63434),Z=t(24556),F=t(38925),S=t(45360),P=t(56440),L=t(22762),q=t(67294),C=t(73935),N=t(67610),_=t(85893),z=function(){var e=(0,Z.l)((function(e){return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:e.token.colorPrimaryActive}}}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.Z,{className:e},"AlipayCircleOutlined"),(0,_.jsx)(x.Z,{className:e},"TaobaoCircleOutlined"),(0,_.jsx)(M.Z,{className:e},"WeiboCircleOutlined")]})},I=function(){var e=(0,Z.l)((function(e){var a=e.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:a.borderRadius,":hover":{backgroundColor:a.colorBgTextHover}}}));return(0,_.jsx)("div",{className:e,"data-lang":!0,children:p.SelectLang&&(0,_.jsx)(p.SelectLang,{})})},T=function(e){var a=e.content;return(0,_.jsx)(F.Z,{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},W=function(){var e=(0,q.useState)({}),a=u()(e,2),t=a[0],s=a[1],n=(0,q.useState)("account"),i=u()(n,2),c=i[0],h=i[1],m=(0,p.useModel)("@@initialState"),x=m.initialState,M=m.setInitialState,F=(0,Z.l)((function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}})),W=(0,p.useIntl)(),U=function(){var e=l()(r()().mark((function e(){var a,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==x||null===(a=x.fetchUserInfo)||void 0===a?void 0:a.call(x);case 2:(t=e.sent)&&(0,C.flushSync)((function(){M((function(e){return o()(o()({},e),{},{currentUser:t})}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=l()(r()().mark((function e(a){var t,n,i,l;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.x4)(o()(o()({},a),{},{type:c}));case 3:if("ok"!==(t=e.sent).status){e.next=12;break}return n=W.formatMessage({id:"pages.login.success",defaultMessage:"登录成功！"}),S.ZP.success(n),e.next=9,U();case 9:return i=new URL(window.location.href).searchParams,p.history.push(i.get("redirect")||"/"),e.abrupt("return");case 12:console.log(t),s(t),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),l=W.formatMessage({id:"pages.login.failure",defaultMessage:"登录失败，请重试！"}),console.log(e.t0),S.ZP.error(l);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(a){return e.apply(this,arguments)}}(),B=t.status,G=t.type,H=new L.vd({auth:"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"});return console.log("--1"),H.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duuganlx",repo:"datahub",path:"test.csv",headers:{"X-GitHub-Api-Version":"2022-11-28"}}).then((function(e){console.log(e);var a=atob(e.data.content);console.log(a)})).catch((function(e){console.log(e)})),(0,_.jsxs)("div",{className:F,children:[(0,_.jsx)(p.Helmet,{children:(0,_.jsxs)("title",{children:[W.formatMessage({id:"menu.login",defaultMessage:"登录页"}),"- ",N.Z.title]})}),(0,_.jsx)(I,{}),(0,_.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,_.jsxs)(w.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,_.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:W.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,_.jsx)(p.FormattedMessage,{id:"pages.login.loginWith",defaultMessage:"其他登录方式"},"loginWith"),(0,_.jsx)(z,{},"icons")],onFinish:function(){var e=l()(r()().mark((function e(a){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),children:[(0,_.jsx)(P.Z,{activeKey:c,onChange:h,centered:!0,items:[{key:"account",label:W.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"账户密码登录"})},{key:"mobile",label:W.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"手机号登录"})}]}),"error"===B&&"account"===G&&(0,_.jsx)(T,{content:W.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"账户或密码错误(admin/ant.design)"})}),"account"===c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.Z,{name:"username",fieldProps:{size:"large",prefix:(0,_.jsx)(j.Z,{})},placeholder:W.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"用户名: admin"}),rules:[{required:!0,message:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"请输入用户名!"})}]}),(0,_.jsx)(y.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,_.jsx)(v.Z,{})},placeholder:W.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"密码: admin"}),rules:[{required:!0,message:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"请输入密码！"})}]})]}),"error"===B&&"mobile"===G&&(0,_.jsx)(T,{content:"验证码错误"}),"mobile"===c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.Z,{fieldProps:{size:"large",prefix:(0,_.jsx)(b.Z,{})},name:"mobile",placeholder:W.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})},{pattern:/^1\d{10}$/,message:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})}]}),(0,_.jsx)(k.Z,{fieldProps:{size:"large",prefix:(0,_.jsx)(v.Z,{})},captchaProps:{size:"large"},placeholder:W.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,a){return e?"".concat(a," ").concat(W.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):W.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},name:"captcha",rules:[{required:!0,message:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],onGetCaptcha:function(){var e=l()(r()().mark((function e(a){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({phone:a});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:S.ZP.success("获取验证码成功！验证码为：1234");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),(0,_.jsxs)("div",{style:{marginBottom:24},children:[(0,_.jsx)(A.Z,{noStyle:!0,name:"autoLogin",children:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"自动登录"})}),(0,_.jsx)("a",{style:{float:"right"},children:(0,_.jsx)(p.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"忘记密码"})})]})]})}),(0,_.jsx)(g.$_,{})]})}},5696:function(){}}]);