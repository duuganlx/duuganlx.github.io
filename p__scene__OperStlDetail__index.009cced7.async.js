"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[603],{95485:function(e,n,a){a.r(n),a.d(n,{default:function(){return Y}});var t=a(5574),i=a.n(t),r=a(53899),o=a(55355),l=a(11774),d=a(56440),c=a(67294),u=a(27484),s=a.n(u),m=a(84031),g=a(85893),f=function(e){var n=e.balancesData,a=(0,c.useState)(0),t=i()(a,2),r=t[0],o=t[1],l=c.useRef(null);(0,c.useEffect)((function(){if(l.current){var e=l.current.getEchartsInstance();e.getZr().on("click",(function(a){var t=e.convertFromPixel({seriesIndex:0},[a.offsetX,a.offsetY])[0];if(t&&void 0!==n[t]){var i=+n[t].tradeDate/1e3;o(i)}}))}}),[]);var d={grid:[{top:29,left:65,right:30,height:170},{top:"68%",left:65,right:30,height:50}],legend:{orient:"horizontal",top:"5px",align:"right"},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"category",gridIndex:0,triggerEvent:!0,show:!1,data:n.map((function(e){return e.tradeDate})).map((function(e){return s()(+e).format("YYYY-MM-DD")}))},{type:"category",triggerEvent:!0,gridIndex:1,data:n.map((function(e){return e.tradeDate})).map((function(e){return s()(+e).format("YYYY-MM-DD")}))}],yAxis:[{type:"value",name:"",nameLocation:"middle",gridIndex:0,position:"left",alignTicks:!0,axisLabel:{formatter:"{value}%",align:"right"}},{type:"value",name:"",gridIndex:1,nameLocation:"middle",position:"left",alignTicks:!0,axisLabel:{hideOverlap:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},{type:"value",name:"盈亏(%)",nameLocation:"middle",nameRotate:-90,gridIndex:0,position:"right",alignTicks:!0},{type:"value",name:"手续费(元)",nameLocation:"middle",nameRotate:-90,gridIndex:1,position:"right",alignTicks:!0}],series:[{name:"累计盈亏",type:"line",gridIndex:0,xAxisIndex:0,yAxisIndex:0,data:n.map((function(e){var n;return+((null===(n=e.pnl)||void 0===n?void 0:n.toFixed(2))||0)})),markLine:{silent:"true",symbol:"none",lineStyle:{color:"red"},label:{show:!1},data:[{xAxis:s()(1e3*r).format("YYYY-MM-DD")}]}},{name:"基准累计盈亏",type:"line",gridIndex:0,xAxisIndex:0,yAxisIndex:0,data:n.map((function(e){var n;return+((null===(n=e.bmPnl)||void 0===n?void 0:n.toFixed(2))||0)}))},{name:"手续费",type:"bar",gridIndex:1,xAxisIndex:1,yAxisIndex:1,data:n.map((function(e){var n;return+((null===(n=e.commission)||void 0===n?void 0:n.toFixed(2))||0)})),markLine:{silent:"true",symbol:"none",lineStyle:{color:"red"},label:{show:!1},data:[{xAxis:s()(1e3*r).format("YYYY-MM-DD")}]}}],tooltip:{trigger:"axis"}};return(0,g.jsx)(m.Z,{ref:l,option:d,style:{width:"100%",height:"300px"}})},p=a(97857),y=a.n(p),x=a(45287);var h=function(e){var n,a=e.balancesData,t=(0,c.useRef)(null),i=(0,c.useRef)(null),r=(n={line:[],column:[],ori:[]},a.forEach((function(e){var a=s()(+e.tradeDate).format("YYYY-MM-DD");n.line.push({tradeDate:a,value:e.pnl,category:"pnl"},{tradeDate:a,value:e.bmPnl,category:"bmPnl"}),n.ori.push(y()(y()({},e),{},{tradeDate:a}))})),n);return(0,c.useEffect)((function(){t.current&&(t.current.innerHTML="",i.current=function(e,n){var a=new x.kL({container:e,autoFit:!0,theme:"classic",paddingLeft:50,paddingBottom:40,paddingRight:30,paddingTop:20,marginLeft:40,marginTop:30,marginRight:20,marginBottom:10,insetLeft:10,insetTop:20,insetRight:30,insetBottom:10});return a.line().data(n.line).encode("x",{type:"field",value:"tradeDate"}).encode("y","value").encode("series","category").encode("color","category").tooltip({title:"tradeDate",items:[function(e){return{name:"".concat(e.caegory,"=1"),value:(+e.value).toFixed(2)}}]}).legend("color",{width:180,style:{itemLabel:"xxx",itemLabelFontSize:18}}).axis("y",{line:!0,title:"盈亏(%)",labelFormatter:".1%"}).axis("x",{line:!0,arrow:!1,tickCount:5,transform:!0,labelAutoHide:function(e,n,a){return console.log(e,n,a),0},style:{labelAlign:"horizontal"}}),console.log(a.options()),a.render().then((function(){console.log("render success")})).catch((function(e){console.log(e)})),a}(t.current,r))}),[]),(0,g.jsx)("div",{ref:t,style:{width:"100%",height:"300px"}})},v=a(79558);function A(e,n){var a=n||{},t=a.nanStr,i=void 0===t?"--":t,r=a.eps;if(isNaN(+e))return i;var o=e;r&&Math.abs(+e)<r&&(o=0);var l=n||{},d=l.decUnit,c=void 0===d?1:d,u=l.decLen;return void 0===u?Number(+o/c).toLocaleString():Number(+o/c).toLocaleString("zh",{minimumFractionDigits:u,maximumFractionDigits:u})}function b(e){return{id:"markTradeDate",type:"line",start:[e,"min"],end:[e,"max"],style:{lineDash:[4,4],lineWidth:1,stroke:"red"}}}var T=function(e){var n=e.balancesData,a=(0,c.useRef)(null),t=(0,c.useRef)(null),r=(0,c.useState)(0),o=i()(r,2),l=o[0],d=o[1];return(0,c.useEffect)((function(){if(a.current){a.current.innerHTML="";var e,i=(e={line:[],column:[]},n.forEach((function(n){var a=s()(+n.tradeDate).format("YYYY-MM-DD");e.line.push({tradeDate:a,value:n.pnl,category:"pnl"},{tradeDate:a,value:n.bmPnl,category:"bmPnl"}),e.column.push({tradeDate:a,value:n.commission,category2:"commission"})})),e);t.current=function(e,n){var a={syncViewPadding:!0,autoFit:!0,appendPadding:[30,70,25,70],padding:[0,0,0,0],renderer:"canvas",useDeferredLabel:!1,legend:{category:{layout:"horizontal",position:"top",offsetX:-70},category2:{layout:"horizontal",position:"top",offsetX:100,offsetY:-40}},tooltip:{shared:!0,showCrosshairs:!0,crosshairs:{type:"x",follow:!0},formatter:function(e){return console.log(e),{name:"xx",value:0}},customItems:function(e){return e.map((function(e){return y()(y()({},e),{},{value:isNaN(+e.value)?"-":A(+e.value,{decLen:2})})}))}},plots:[{region:{start:{x:0,y:0},end:{x:1,y:.75}},type:"line",options:{data:n.line,xField:"tradeDate",yField:"value",seriesField:"category",xAxis:!1,yAxis:{title:{text:"盈亏(%)",position:"center",offset:60,style:{fontStyle:"normal",fontSize:13}},label:{formatter:function(e){return"".concat(e,"%")}},verticalFactor:1},meta:{category:{formatter:function(e){switch(e){case"pnl":return"累计盈亏(%)";case"bmPnl":return"基准盈亏(%)";default:return e}}}},annotations:[b(0)]}},{region:{start:{x:0,y:.81},end:{x:1,y:1}},type:"column",options:{data:n.column,xField:"tradeDate",yField:"value",seriesField:"category2",color:"#13c2c2",yAxis:{title:{text:"手续费(元)",position:"center",style:{fontStyle:"normal",fontSize:13}},grid:null},meta:{category2:{formatter:function(e){return"commission"===e?"手续费":e}}},annotations:[b(0)]}}]},t=new v.V2(e,a);return t.render(),t}(a.current,i),t.current.on("plot:click",(function(e){var a,i=e.x,r=e.y,o=function(e,n){for(var a=0,t=0;t<n.length;t++){var i=n[t];if(s()(+i.tradeDate).format("YYYY-MM-DD")===e){a=t;break}}return a}(null===(a=t.current)||void 0===a?void 0:a.chart.getSnapRecords({x:i,y:r})[0]._origin.tradeDate,n);d(o)}))}}),[]),(0,c.useEffect)((function(){t.current&&function(e,n){var a=n.chart.views[0],t=n.chart.views[1];n.removeAnnotations([{id:"markTradeDate"}]),n.addAnnotations([b(e)],a),n.addAnnotations([b(e)],t)}(l,t.current)}),[l]),(0,g.jsx)("div",{ref:a,style:{width:"100%",height:"300px"}})};var B=[{id:"39c52ed9-01b0-4690-9d49-f1c47137a31c",datetime:"2023-06-14",marginTradingBalance:16029.52,financingBalance:15107.76,securityLoanBalance:921.76,maringBuyAmount:721.46,shortSellAmount:67.94,marketValueCpr:2.25,marginTradingAmount:789.4,marginTradingCpr:7.88},{id:"a50dee20-452f-4d96-ae95-95445b6f2892",datetime:"2023-06-15",marginTradingBalance:16038.91,financingBalance:15100.34,securityLoanBalance:938.57,maringBuyAmount:796.67,shortSellAmount:69.3,marketValueCpr:2.23,marginTradingAmount:865.98,marginTradingCpr:8.07},{id:"5d4e184d-7b70-4d72-a351-9f932aa6df73",datetime:"2023-06-16",marginTradingBalance:16036.02,financingBalance:15072.81,securityLoanBalance:963.2,maringBuyAmount:801.21,shortSellAmount:71.59,marketValueCpr:2.21,marginTradingAmount:872.8,marginTradingCpr:8.17},{id:"a27a2497-90a4-43c2-a8af-70001dd26004",datetime:"2023-06-19",marginTradingBalance:16103.45,financingBalance:15134.85,securityLoanBalance:968.61,maringBuyAmount:864.56,shortSellAmount:68.48,marketValueCpr:2.23,marginTradingAmount:933.04,marginTradingCpr:8.42},{id:"dc8812ff-dbf7-46f9-a31e-a023ad0c619d",datetime:"2023-06-20",marginTradingBalance:16139.88,financingBalance:15164.78,securityLoanBalance:975.1,maringBuyAmount:844.49,shortSellAmount:67.77,marketValueCpr:2.24,marginTradingAmount:912.26,marginTradingCpr:8.36},{id:"a8cbd78f-834e-44b7-aa5f-5b463ed09289",datetime:"2023-06-21",marginTradingBalance:16015.74,financingBalance:15073.57,securityLoanBalance:942.17,maringBuyAmount:717.25,shortSellAmount:64.16,marketValueCpr:2.26,marginTradingAmount:781.41,marginTradingCpr:7.63},{id:"8aa42b6c-1189-4a63-8996-3bf9580489ce",datetime:"2023-06-26",marginTradingBalance:15963.55,financingBalance:15055.14,securityLoanBalance:908.4,maringBuyAmount:654.09,shortSellAmount:60.65,marketValueCpr:2.29,marginTradingAmount:714.74,marginTradingCpr:7.3},{id:"616502d0-cbee-4e5a-9110-ca6aebfa174a",datetime:"2023-06-27",marginTradingBalance:15957.45,financingBalance:15047.18,securityLoanBalance:910.27,maringBuyAmount:541.34,shortSellAmount:52.23,marketValueCpr:2.26,marginTradingAmount:593.57,marginTradingCpr:7.05},{id:"82a2f03a-a48f-480c-aca0-9092b33aa93e",datetime:"2023-06-28",marginTradingBalance:15907.14,financingBalance:15001.99,securityLoanBalance:905.15,maringBuyAmount:583.59,shortSellAmount:60.39,marketValueCpr:2.25,marginTradingAmount:643.99,marginTradingCpr:7.24},{id:"dec013f0-143d-4229-87b3-23c59709ce61",datetime:"2023-06-29",marginTradingBalance:15925.08,financingBalance:15010.44,securityLoanBalance:914.64,maringBuyAmount:589.12,shortSellAmount:57.88,marketValueCpr:2.26,marginTradingAmount:647,marginTradingCpr:7.47},{id:"39b1838a-b5a1-4bdf-a5b8-6a13e916543b",datetime:"2023-06-30",marginTradingBalance:15885.01,financingBalance:14954.96,securityLoanBalance:930.05,maringBuyAmount:627.68,shortSellAmount:60.87,marketValueCpr:2.23,marginTradingAmount:688.54,marginTradingCpr:7.48},{id:"68e91181-c09d-4a6a-89ee-697067626f60",datetime:"2023-07-03",marginTradingBalance:15918.03,financingBalance:14984.68,securityLoanBalance:933.35,maringBuyAmount:728.82,shortSellAmount:58.94,marketValueCpr:2.21,marginTradingAmount:787.76,marginTradingCpr:7.68},{id:"d8df11ae-7dea-4883-bb33-3f032989d967",datetime:"2023-07-04",marginTradingBalance:15954.6,financingBalance:15007.91,securityLoanBalance:946.68,maringBuyAmount:668.08,shortSellAmount:62.37,marketValueCpr:2.21,marginTradingAmount:730.45,marginTradingCpr:7.85},{id:"cd82df3d-cee1-4175-8227-d62fdbc8e322",datetime:"2023-07-05",marginTradingBalance:15965.31,financingBalance:15017.25,securityLoanBalance:948.05,maringBuyAmount:608.71,shortSellAmount:58.78,marketValueCpr:2.23,marginTradingAmount:667.49,marginTradingCpr:7.67},{id:"d21d3b10-3675-4921-acd7-1ed1c00293d4",datetime:"2023-07-06",marginTradingBalance:15976.32,financingBalance:15025.46,securityLoanBalance:950.86,maringBuyAmount:582.5,shortSellAmount:51.81,marketValueCpr:2.24,marginTradingAmount:634.31,marginTradingCpr:7.72},{id:"e3f16b1d-95e9-4a01-9c8c-7401bb9080bc",datetime:"2023-07-07",marginTradingBalance:15926.18,financingBalance:14983.33,securityLoanBalance:942.85,maringBuyAmount:531.16,shortSellAmount:50.68,marketValueCpr:2.24,marginTradingAmount:581.84,marginTradingCpr:7.26},{id:"790f1a1c-f908-47e0-832d-f4c4b0a5671c",datetime:"2023-07-10",marginTradingBalance:15930.92,financingBalance:14989.98,securityLoanBalance:940.94,maringBuyAmount:503.92,shortSellAmount:48.11,marketValueCpr:2.24,marginTradingAmount:552.03,marginTradingCpr:7.24},{id:"88846b3b-4690-4d74-bbe2-172c98170a46",datetime:"2023-07-11",marginTradingBalance:15938.01,financingBalance:14993.48,securityLoanBalance:944.52,maringBuyAmount:533.79,shortSellAmount:53.25,marketValueCpr:2.22,marginTradingAmount:587.04,marginTradingCpr:7.58},{id:"456d88f5-7229-4ea4-802c-f1e005d43e50",datetime:"2023-07-12",marginTradingBalance:15897.71,financingBalance:14965.31,securityLoanBalance:932.4,maringBuyAmount:624.42,shortSellAmount:57.87,marketValueCpr:2.24,marginTradingAmount:682.28,marginTradingCpr:7.47},{id:"e77788e8-7d0b-48c4-bce7-ad731c61b693",datetime:"2023-07-13",marginTradingBalance:15890.5,financingBalance:14947.93,securityLoanBalance:942.56,maringBuyAmount:633.91,shortSellAmount:61.26,marketValueCpr:2.21,marginTradingAmount:695.17,marginTradingCpr:7.54}];var k=function(){var e=B,n={animation:!0,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{orient:"horizontal",align:"left"},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},grid:{left:"3%",right:"2%",bottom:"12px",top:"15%",containLabel:!0},dataZoom:[{id:"dataZoom",type:"inside",xAxisIndex:0,start:0,end:100},{id:"sliderZoom",show:!1,type:"slider",xAxisIndex:0,bottom:"10px",start:0,end:100,showDetail:!1}],xAxis:{type:"category",data:e.map((function(e){return e.datetime}))},yAxis:[{type:"value",name:"成交额",position:"left",alignTicks:!0,scale:!0,axisLine:{show:!0},axisLabel:{formatter:"{value}"}},{type:"value",name:"百分比",position:"right",scale:!0,alignTicks:!0,axisLine:{show:!0},axisLabel:{formatter:function(e){return"".concat(e.toFixed(1)," %")}}}],series:[{name:"两融成交额(亿元)",type:"bar",yAxisIndex:0,color:"rgb(36,74,171)",data:e.map((function(e){return[e.datetime,e.marginTradingAmount]}))},{name:"两融成交额占A股成交额(%)",type:"line",color:"rgb(212,0,0)",yAxisIndex:1,data:e.map((function(e){return[e.datetime,e.marginTradingCpr]}))}]},a=(0,c.useRef)(null),t=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(a.current){a.current.innerHTML="";var n,i=(n=[],e.forEach((function(e){var a=e.datetime;n.push({datetime:a,marginTradingAmount:e.marginTradingAmount,marginTradingCpr:e.marginTradingCpr})})),n);t.current=function(e,n){var a={autoFit:!0,data:[n,n],appendPadding:[40,45,40,35],padding:[0,0,0,0],xField:"datetime",yField:["marginTradingAmount","marginTradingCpr"],limitInPlot:!1,slider:{height:14,padding:[0,40,-45,40]},xAxis:{position:"bottom",line:{style:{}}},yAxis:[{tickCount:6,showLast:!0,title:{text:"成交额",autoRotate:!1,position:"end",offset:0},line:{style:{stroke:"#000",lineWidth:1}},tickLine:{style:{stroke:"#000"}}},{tickCount:6,showLast:!0,title:{text:"百分比",autoRotate:!1,position:"end",offset:-10},label:{formatter:function(e){return e+" %"}},line:{style:{stroke:"#000",lineWidth:1}},tickLine:{style:{stroke:"#000"}}}],geometryOptions:[{geometry:"column",color:"#2f54eb"},{geometry:"line",color:"red"}],meta:{marginTradingAmount:{alias:"两融成交额(亿元)",formatter:function(e){return A(e)}},marginTradingCpr:{alias:"两融成交额占A股成交额(%)",formatter:function(e){return A(e)}}},legend:{layout:"horizontal",position:"top"},tooltip:{follow:!0,enterable:!1,showCrosshairs:!0,crosshairs:{type:"x",follow:!1}},interactions:[{type:"test",enable:!1}]},t=new v.VT(e,a);return t.render(),t}(a.current,i),v.G2.registerInteraction("test",{start:[{isEnable:function(e){var n,a=null===(n=e.event.data)||void 0===n?void 0:n.element;return console.log("--1 ",a),!0},trigger:"plot:mousemove",action:function(e){console.log("--2 ",e)}}],end:[{trigger:"plot:mouseleave",action:function(e){console.log("--3 ",e)}}]}),t.current.on("plot:click",(function(e){console.log(e)}))}}),[]),(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[(0,g.jsx)("div",{style:{width:"426px",height:"350px"},ref:a}),(0,g.jsx)("div",{style:{width:"426px",height:"350px"},children:(0,g.jsx)(m.Z,{option:n,style:{minHeight:"350px",marginTop:8}})})]})},C=function(){var e=function(e){for(var n=[],a=s()("1970-01-01"),t=0;t<e;t++){var i={pnl:Math.random(),tradeDate:""+1e3*a.unix(),bmPnl:Math.random(),commission:1e4*Math.random()};n.push(i),a=a.add(1,"day")}return n}(100);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{marginBottom:"10px"},children:(0,g.jsx)(k,{})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(h,{balancesData:e}),(0,g.jsx)("div",{style:{width:"100%",height:"1px",border:"1px solid #d9d9d9",margin:"10px 0"}}),(0,g.jsx)(T,{balancesData:e}),(0,g.jsx)("div",{style:{width:"100%",height:"1px",border:"1px solid #d9d9d9",margin:"10px 0"}}),(0,g.jsx)(f,{balancesData:e})]})]})},L=[{city:"A",sex:"男",value:52},{city:"A",sex:"女",value:48},{city:"B",sex:"男",value:130},{city:"B",sex:"女",value:70}];var D=function(){var e=(0,c.useRef)(null),n=(0,c.useRef)(null);return(0,c.useEffect)((function(){e.current&&(e.current.innerHTML="",n.current=function(e){var n=new x.kL({container:e,theme:"classic",autoFit:!0}),a=n.timingKeyframe();return a.interval().data(L).transform({type:"groupX",y:"sum"}).encode("x","city").encode("y","value").encode("key","city"),a.interval().data(L).transform({type:"dodgeX"}).encode("x","city").encode("y","value").encode("color","sex").encode("groupKey","city"),n.render(),n}(e.current))}),[]),(0,g.jsx)("div",{ref:e,style:{width:"500px",height:"300px"}})},w="pageContainer___xiktR",S="pcTabs___XyIHu",Y=function(){var e=(0,c.useState)("product"),n=i()(e,2),a=n[0],t=n[1];return(0,g.jsx)(l._z,{className:w,fixedHeader:!1,subTitle:(0,g.jsx)(d.Z,{className:S,style:{margin:"0"},activeKey:a,items:[{label:(0,g.jsxs)("div",{children:[(0,g.jsx)(r.Z,{style:{marginRight:4}}),"对比"]}),key:"product"},{label:(0,g.jsxs)("div",{children:[(0,g.jsx)(o.Z,{style:{marginRight:4}}),"类型"]}),key:"manager"}],onChange:function(e){t(e)}}),children:function(){switch(a){case"product":return(0,g.jsx)(C,{});case"manager":return(0,g.jsx)(D,{});default:return null}}()})}}}]);