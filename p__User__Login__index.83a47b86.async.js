(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{42753:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var s=a(15009),n=a.n(s),r=a(97857),o=a.n(r),i=a(99289),l=a.n(i),c=a(5574),u=a.n(c),g=a(1210),d=a(87909),p=a(80854),f=a(67294),h=a(85893),m=function(){var e=(0,p.useIntl)().formatMessage({id:"app.copyright.produced",defaultMessage:"蚂蚁集团体验技术部出品"}),t=(new Date).getFullYear();return(0,h.jsx)(d.q,{style:{background:"none"},copyright:"".concat(t," ").concat(e),links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:(0,h.jsx)(g.Z,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})},x=(a(19632),a(2618));a(55877);var M=a(24556),j=(a(17673),a(73935));a(9783),a(13769),a(94184);function v(e,t){return b.apply(this,arguments)}function b(){return(b=l()(n()().mark((function e(t,a){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/login/captcha",o()({method:"GET",params:o()({},t)},a||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=a(88777),k=a(96833),w=a(97487),A=a(87547),Z=a(94149),F=a(24454),P=a(10738),S=a(5966),q=a(16434),L=a(63434),C=a(38925),T=a(45360),N=a(56440),z=a(22762),D=a(67610),I=function(){var e=(0,M.l)((function(e){return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:e.token.colorPrimaryActive}}}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y.Z,{className:e},"AlipayCircleOutlined"),(0,h.jsx)(k.Z,{className:e},"TaobaoCircleOutlined"),(0,h.jsx)(w.Z,{className:e},"WeiboCircleOutlined")]})},_=function(){var e=(0,M.l)((function(e){var t=e.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:t.borderRadius,":hover":{backgroundColor:t.colorBgTextHover}}}));return(0,h.jsx)("div",{className:e,"data-lang":!0,children:p.SelectLang&&(0,h.jsx)(p.SelectLang,{})})},W=function(e){var t=e.content;return(0,h.jsx)(C.Z,{style:{marginBottom:24},message:t,type:"error",showIcon:!0})},B=function(){var e=(0,f.useState)({}),t=u()(e,2),a=t[0],s=t[1],r=(0,f.useState)("account"),i=u()(r,2),c=i[0],g=i[1],d=(0,p.useModel)("@@initialState"),b=d.initialState,y=d.setInitialState,k=(0,M.l)((function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}})),w=(0,p.useIntl)(),C=function(){var e=l()(n()().mark((function e(){var t,a;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==b||null===(t=b.fetchUserInfo)||void 0===t?void 0:t.call(b);case 2:(a=e.sent)&&(0,j.flushSync)((function(){y((function(e){return o()(o()({},e),{},{currentUser:a})}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=l()(n()().mark((function e(t){var a,r,i,l;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.x4)(o()(o()({},t),{},{type:c}));case 3:if("ok"!==(a=e.sent).status){e.next=12;break}return r=w.formatMessage({id:"pages.login.success",defaultMessage:"登录成功！"}),T.ZP.success(r),e.next=9,C();case 9:return i=new URL(window.location.href).searchParams,p.history.push(i.get("redirect")||"/"),e.abrupt("return");case 12:console.log(a),s(a),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),l=w.formatMessage({id:"pages.login.failure",defaultMessage:"登录失败，请重试！"}),console.log(e.t0),T.ZP.error(l);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),G=a.status,H=a.type,R=new z.vd;return console.log("--1"),R.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duuganlx",repo:"datahub",path:"test.csv",headers:{"X-GitHub-Api-Version":"2022-11-28"}}).then((function(e){console.log(e);var t=atob(e.data.content);console.log(t)})).catch((function(e){console.log(e)})),(0,h.jsxs)("div",{className:k,children:[(0,h.jsx)(p.Helmet,{children:(0,h.jsxs)("title",{children:[w.formatMessage({id:"menu.login",defaultMessage:"登录页"}),"- ",D.Z.title]})}),(0,h.jsx)(_,{}),(0,h.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,h.jsxs)(P.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,h.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:w.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,h.jsx)(p.FormattedMessage,{id:"pages.login.loginWith",defaultMessage:"其他登录方式"},"loginWith"),(0,h.jsx)(I,{},"icons")],onFinish:function(){var e=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,h.jsx)(N.Z,{activeKey:c,onChange:g,centered:!0,items:[{key:"account",label:w.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"账户密码登录"})},{key:"mobile",label:w.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"手机号登录"})}]}),"error"===G&&"account"===H&&(0,h.jsx)(W,{content:w.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"账户或密码错误(admin/ant.design)"})}),"account"===c&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Z,{name:"username",fieldProps:{size:"large",prefix:(0,h.jsx)(A.Z,{})},placeholder:w.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"用户名: admin"}),rules:[{required:!0,message:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"请输入用户名!"})}]}),(0,h.jsx)(S.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,h.jsx)(Z.Z,{})},placeholder:w.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"密码: admin"}),rules:[{required:!0,message:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"请输入密码！"})}]})]}),"error"===G&&"mobile"===H&&(0,h.jsx)(W,{content:"验证码错误"}),"mobile"===c&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Z,{fieldProps:{size:"large",prefix:(0,h.jsx)(F.Z,{})},name:"mobile",placeholder:w.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})},{pattern:/^1\d{10}$/,message:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})}]}),(0,h.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,h.jsx)(Z.Z,{})},captchaProps:{size:"large"},placeholder:w.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,t){return e?"".concat(t," ").concat(w.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):w.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},name:"captcha",rules:[{required:!0,message:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],onGetCaptcha:function(){var e=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({phone:t});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:T.ZP.success("获取验证码成功！验证码为：1234");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),(0,h.jsxs)("div",{style:{marginBottom:24},children:[(0,h.jsx)(L.Z,{noStyle:!0,name:"autoLogin",children:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"自动登录"})}),(0,h.jsx)("a",{style:{float:"right"},children:(0,h.jsx)(p.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"忘记密码"})})]})]})}),(0,h.jsx)(m,{})]})}},5696:function(){}}]);